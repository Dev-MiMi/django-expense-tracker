{% extends "private/base_toggle.html" %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container mt-4">
    <h2>Create Budget</h2>
    <form method="post">
        {% csrf_token %}

        {{ form.media }} <!-- âœ… Required for Select2 widget to load properly -->

        <div class="mb-3">
            {{ form.name.label_tag }} 
            {{ form.name }}
        </div>

        <div class="mb-3">
            {{ form.categories.label_tag }}
            {{ form.categories }}
        </div>

        <div class="mb-3">
            {{ form.account.label_tag }}
            {{ form.account }}
        </div>

        <div class="mb-3">
            {{ form.period.label_tag }}
            {{ form.period }}
        </div>

        <div class="mb-3">
            {{ form.start_date.label_tag }}
            {{ form.start_date }}
        </div>

        <div class="mb-3">
            {{ form.end_date.label_tag }}
            {{ form.end_date }}
        </div>

        <div class="mb-3">
            {{ form.amount.label_tag }}
            {{ form.amount }}
        </div>

        <button type="submit" class="btn btn-primary">Save Budget</button>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
    $(document).ready(function () {
        // Initialize Select2
        $('#id_categories').select2({
            theme: 'bootstrap-5',
            placeholder: 'Select categories',
            allowClear: true
        });

        $('#id_account').select2({
            theme: 'bootstrap-5',
            placeholder: 'Select account(s)',
            allowClear: true
        });
    });
</script>
{% endblock %}
